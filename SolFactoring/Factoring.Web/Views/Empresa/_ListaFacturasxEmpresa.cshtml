@model IEnumerable<Factoring.Web.Funcionalidades.ListarFactura.ListarFacturaViewModel>

<div id="ListaFacturasxEmpresa">
    @using (Html.BeginForm("ListarDetalle", "Empresa", FormMethod.Post,
                                                                            new
                                                                            {
                                                                                id = "ListaFacturasxEmpresaForm",
                                                                                @class = "form-horizontal",
                                                                                role = "form"
                                                                            }
                                                                            ))
    {

        @Html.AntiForgeryToken()

        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button"
                            class="close"
                            data-dismiss="modal"
                            aria-hidden="true">
                        &times;
                    </button>
                    <h4>Detalle Facturas por Empresa</h4>
                </div>
                <div class="modal-body">
                    @Html.ValidationSummary(true, "", new { @class = "text-danger" })

                    <table class="table">
                        <tr>
                            @*<th>
                                @Html.DisplayNameFor(model => model.IdFactura)
                            </th>*@
                            <th>
                                @Html.DisplayNameFor(model => model.NuFactura)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.FeEmision)
                            </th>
                            @*<th>
                                @Html.DisplayNameFor(model => model.FeVencimiento)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.FeCobro)
                            </th>*@
                            @*<th>
                                @Html.DisplayNameFor(model => model.NuEmpresa)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.NuRuc)
                            </th>*@
                            <th>
                                @Html.DisplayNameFor(model => model.TxRazonSocial)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.SsTotFactura)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.SsTotImpuestos)
                            </th>
                            @*<th>
                                @Html.DisplayNameFor(model => model.CoUserModif)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.FeModif)
                            </th>*@
                            <th></th>

                        </tr>

                        @foreach (var item in Model)
                        {
                            <tr>
                                @*<td>
                                    @Html.DisplayFor(modelItem => item.IdFactura)
                                </td>*@
                                <td>
                                    @Html.HiddenFor(modelItem => item.IdFactura)
                                    @Html.DisplayFor(modelItem => item.NuFactura)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.FeEmision)
                                </td>
                                @*<td>
                                    @Html.DisplayFor(modelItem => item.FeVencimiento)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.FeCobro)
                                </td>*@
                                @*<td>
                                    @Html.DisplayFor(modelItem => item.NuEmpresa)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.NuRuc)
                                </td>*@
                                <td>
                                    @Html.DisplayFor(modelItem => item.TxRazonSocial)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.SsTotFactura)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.SsTotImpuestos)
                                </td>
                                @*<td>
                                    @Html.DisplayFor(modelItem => item.CoUserModif)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.FeModif)
                                </td>*@

                                <td>
                                    <div class="btn-group">
                                        <button class="btn dropdown-toggle btn-xs"
                                                data-toggle="dropdown">
                                            <span>
                                                <i class="glyphicon glyphicon-cog"></i>
                                                <span class="caret"></span>
                                            </span>
                                        </button>
                                        <ul class="dropdown-menu">
                                            <li>
                                                @Ajax.ActionLink(" ", "EditarFactura", "Empresa"
                   , new { IdFactura = item.IdFactura }
                   , new AjaxOptions
                   {
                       HttpMethod = "Get",
                       InsertionMode = InsertionMode.Replace,
                       UpdateTargetId = "ResultadoEmpresas"
                   }
                   ,
                   new
                   {
                       @class = "glyphicon glyphicon-eye-open",
                       data_toggle = "modal",
                       data_target = "#FacturaEditForm"
                   }
                   )
                                            </li>

                                            <li>
                                                @*@Html.ActionLink(" ", "Delete", new { id = item.Id }, new { @class = "glyphicon glyphicon-trash" })*@
                                                @Ajax.ActionLink(" ", "EliminarFactura", "Empresa"
                   , new { IdFactura = item.IdFactura }
                   , new AjaxOptions
                   {
                       HttpMethod = "Get",
                       InsertionMode = InsertionMode.Replace,
                       UpdateTargetId = "ResultadoEmpresas"
                   }
                   ,
                   new
                   {
                       @class = "glyphicon glyphicon-trash",
                       data_toggle = "modal",
                       data_target = "#FacturaDeleteForm"
                   }
                   )
                                            </li>

                                        </ul>
                                    </div>

                                </td>



                            </tr>
                        }

                    </table>
                </div>
                <div class="modal-footer">
                    <div class="col-md-offset-2 col-md-10">
                        <input type="submit" value="Cerrar" class="btn btn-default" 
                               data-toggle="tooltip" data-placement="left" title="Tooltip on left">
                    </div>
                </div>
            </div>

        </div>
    }
</div>

<div id="FacturaEditForm"
     class="modal fade"
     tabindex="-1"
     role="dialog"
     aria-labelledby="EditarPersonalabel"
     aria-hidden="true">
</div>
<div id="FacturaDeleteForm"
     class="modal fade"
     tabindex="-1"
     role="dialog"
     aria-labelledby="EditarPersonalabel"
     aria-hidden="true">
</div>

@section Scripts{
    @Scripts.Render("~/bundles/unobtrusiveajax")
}